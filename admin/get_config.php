<?php
session_start();

// VÃ©rifier que l'utilisateur est connectÃ©
if (!isset($_SESSION['admin_logged_in']) || $_SESSION['admin_logged_in'] !== true) {
    http_response_code(403);
    exit('AccÃ¨s non autorisÃ©');
}

// Charger la configuration
$config_file = __DIR__ . '/../config/config.php';
$patterns_file = __DIR__ . '/../config/log_patterns.php';

$config = [];
$patterns = [];

if (file_exists($config_file)) {
    $config = require $config_file;
}

if (file_exists($patterns_file)) {
    $patterns = require $patterns_file;
}

// Retourner la configuration au format JSON
header('Content-Type: application/json');
echo json_encode([
    'config' => $config,
    'patterns' => $patterns
]); 